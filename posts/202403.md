## 2024/03/06

### KPI 讨论：

A. 故障率
    - 1. 故障记录表
        1. 操作分级：哪些字段谁可以登记、哪些字段谁去更新、判定结果谁去判定。
        2. 故障级别分类的定义
        3. 运作体制：记录表 → 日报 → 月报 
        4. 报告对象
        4. 其他
    - 2. 稼动时间
        1. 稼动时间的定义、计算逻辑 。
          不同设备使用不同的可工作时间
          固定时间段：
          1. 分播墙：9：00~ 23：00
          2. AGV： 6:00~24:00
          3. 闪电播：9：00~ 17：00
          4. 输送线：
          
          故障时间：故障发现(报警）→故障恢复
        2. 数据来源的明确
    - 3. graph中辅助参考系
        1. 故障记录
        2. 稼动时间
        3. 业务量


```python
1. 设备运维管理系统模块
    1. 设备管理
    2. 设备保养
    3. 设备点检
    4. 设备维修
    5. 耗材管理
    6. 知识库
    7. 统计分析
    8. 系统管理
```


```python
故障信息可视化
    0. 基础框架
        设备信息
        设备即时状态信息的解析

    1. 即时状态显示：
       设备故障信息采集，实时？
       报警和事件管理
       数据记录
        
    2. 报表功能：
       收集数据：WCS\输送线\分播墙\WMS的数据采集
       数据处理
       数据分析
       报表生成
    3. 报警功能
       从企微上发送消息给某个组群
需要监控的设备：
    AGV（两个）
    WCS
    分播墙
    闪电播
    输送线
    
SCADA数据的采集
    1. 从WCS上剥离
    2. 让设备也发一遍给某台PC，PC上提前部署数据库。数据库做好对应的表结构
```

设备故障可视化，关键步骤和组件：

**需要监控的设备：**

- AGV（两个）
- WCS
- 分播墙
- 闪电播
- 输送线

**故障数据采集：**

1. 从WCS上剥离数据。
2. 让设备也将数据发送到某台PC，该PC上预先部署了数据库。数据库需要有对应的表结构来存储设备数据。

**数据处理和分析：**

- 清洗和转换收集到的数据，使其适合分析。
- 分析处理后的数据，理解故障的模式和趋势。

**可视化设计和实现：**

- 设计可视化界面，决定如何将数据以图表的形式呈现给用户。
- 使用可视化工具或库（如D3.js、ECharts等）实现设计的可视化界面。

**报警功能：**

- 当发生故障时，系统应能够通过企微向某个组群发送消息。

**报表功能：**

- 系统应能够生成包含设备故障信息的报表，以便进行更深入的分析和决策。

**SCADA数据的采集：**

- 为了实现实时监控和故障预警，您可能需要从SCADA系统中采集设备数据。

## 2024/03/07


```python
1. 本周内整理 "设备故障可视化"，需要做的调查和准备工作。
    1. SCADA数据的采集
        1. 从WCS上剥离 （已跟郭琳共享思路）
        2. 让设备也发一遍给某台PC，PC上提前部署数据库。数据库做好对应的表结构
    2. 各系统和设备目前可用数据
    3. 各设备的数据采集方式
       （可行性打通：实现方法、设备数、数据量）
        1. 输送线是通过TCP协议 ，由PC机向设备请求数据
            
    
2. 报警功能：企微信息的发送

```

《设备故障可视化》调查和准备工作，ToDoList：
    1. 前期调研
        1. 资料收集（PLC、设备的通信协议研究）
            1. 设计资料与接口文档
                米思米WCS设备监控设计说明1.0
                米思米输送线PLC与上位机通信协议V0.6
                RMS-API-3.5.8.pdf
                京东物控标准接口文档(米思米)-V1.0.4.pdf （暂缺）
            2. 故障代码
                米思米输送线异常故障列表V1.0
                rms取还箱异常码
                分播墙异常字典模板-完整
        2. 可行性调查&风险把控
            1. 技术需求（覆盖程度）、分工
            2. 风险点和困难点评估（核心技术要点、瓶颈分析）
        3. 需求调研
            1. 各设备数据收集
            2. 数据分析汇总
            3. 监控需求和可视化要求
            4. 报警
    2. 环境搭建
        1. PC机（有三台PC机）
            周斌有一台
            陆沈聪一台（目前跑数据）
            顾胜斌一台（M910在IS手里，联络过IS要4月头才能给了，目前在新仓库4楼打包封着）
        2. 软件部署(数据库、开发语言选型)
            框架确认，开发软件（如果需要收费软件的license，要提出）
            调试环境



```python
KPI
1. 这些指标的数据来源：已经明确了，可以做。
2. 已经做了一些图样板。图的话，想等到下周一，金总方便的时候。再详细说明。
3. 接下来我也会一个个抽取数据，把模型做出来。
```

## 2024/03/11


```python
1. TMM的指标范围

```


```python
AGV 生产性调查
```


```python

```


```python
根据你的描述，领导想要实现故障可视化功能，我们可以细化一下步骤和必要模块。这样可以更清晰地了解第二期和第一期的交际点，并重新整理功能清单。

步骤和必要模块如下：

1. 数据采集：这个模块负责从设备和系统中收集故障相关的数据，例如设备运行状态、报警信息等。

2. 数据处理与分析：在这个模块中，收集到的数据将经过处理和分析，以便更好地理解故障情况和趋势。这包括数据清洗、统计分析、异常检测等。

3. 故障可视化界面：该模块将负责将处理和分析后的故障数据以可视化的方式呈现给用户。这可以包括图表、仪表盘、地图等形式，以便用户能够直观地了解故障情况。

4. 实时监控与告警：这个模块将实时监控设备的状态，并在发现故障或异常情况时发出告警。这有助于及时采取措施来解决故障。

5. 故障诊断与排查：该模块将提供故障诊断的功能，帮助用户定位故障的具体原因，并提供排查和修复的指导。

6. 历史记录与分析：这个模块将保存故障的历史记录，并提供分析功能，以便用户能够回顾过去的故障情况，并从中获取经验教训。

重新整理后的功能清单如下：

1. 设备管理
2. 设备保养
3. 设备点检
4. 设备维修
5. 耗材管理
6. 知识库
7. 统计分析
8. 系统管理
9. 故障可视化
10. 数据采集
11. 数据处理与分析
12. 实时监控与告警
13. 故障诊断与排查
14. 历史记录与分析

通过细化故障可视化的步骤和必要模块，我们可以更好地理解第二期和第一期的交际点，确保故障可视化功能的实现与系统框架图的一致性。
```

## 2024/03/12


```python
# AGV故障信息的获取
```


```python
# t_chaos_fault_dict 
system_code
# t_monitor_exception_capture
system_code


```

## 2024/03/13

## 临时做图的要求
1. 减少X轴刻度的密度
2. 看下1个小时的曲线
3. 抽一下出货量多的那几天的曲线

# --ToDoList--

## 1. 数据分析
    1. AGV 规划与实际出货量和入库量的差别
        1. 料箱搬运量的差异
        2. 保存商品类别的占比，（超高频、高频、中频、低频）

    2.测算站点料箱滞留时间：
        1. 料盒滞留（前一料箱任务的结束，到下一任务的开始）
        2. 机器拉货（任务的开始，到料箱背到AGV上的时间）

    3.入库效率的测算

    4.任务的负荷量

## 2. KPI模板制作
    1. 确认工作量
    2. 判断周报 or 日报
        1. 周报日报的区别，考虑

## 3. TBMS规划


## 2024/03/14


```python
1. agv 故障清单分析 1-3月
```

## 2024/03/15


```python
已经召集了大家讨论过了，考虑到现在的负荷，推荐以周报的形式进行汇报。
已经明确了各部门的数据提交担当和时间
```


```python
课题-KPI设定观测值：
以周报形式进行汇报
1. 报告时间：每周一的夕会
2. 数据提交担当：各部门提交数据和comment，暂由顾来汇总。
3. 数据提交时间：每周一 13:30前。
4. 数据范围：从3/11开始

*3.18第一次报告，今天周五了，下周一就要报告了。当天看下数据收集情况，如果来不及就再定时间。
```


```python
第一、考虑到目前最重要的是确保现场业务的稳定，现在大家需要把主要精力放在现场管理和课题对应上。
      而且现在数据的处理方法还是依靠手动，每天花时间在做报表和汇报上，会分散掉他们的时间和精力。
    
第二、课题从发现到施策，会有一个周期。以周报的频度有助于把视野聚集到主要问题上。

第三、如果有紧急课题发生，业务现场会启动相应的紧急预案。相关现象会记录在课题管理表上，每日夕会上也会向金总报告的。

所以从目前的状况来看，周报是个比较合适的报告形式。

等数据模型成熟了、主要课题都关闭了，业务相对稳定到一次程度的时候。
我们再看看需不需要切换报告形式。您看可以吗？
```


```python
周报的优点：
综合性：可以更好地了解业务的整体趋势和绩效表现。
精简高效：团队成员能够专注于实际工作
有助于长期趋势分析：有助于识别业务的发展方向和主要问题，并采取相应的措施。
```


```python
日报的优点：
及时性：团队成员更加敏锐地关注绩效和进展情况。
紧急问题追踪：
协调和沟通
```

## 2024/03/20


```python
TBMS 前期调查
  1. 数据通信：
    1. 已连接上了西门子S7，等待科大来开放S7
    2. 京东分播墙是主动上报给WCS，目前没法抓
        格口的状态能抓到
    3. rms HTTP的话暂时弄不了，要考虑socket 或者websocket。拜托周斌去测试连接
  2. scada迁移
    1. 老郭给ttx担当IP地址和账号，ttx就可以开始移机了。
  3. Redis的访问
```


```python
KPI
  1. 故障记录表的记录规范再说明
  2. KPIcomment的填写
  3. 分播墙的异常排出率
    模型的拆解
  4. KPI其他指标的思考和提交
```


```python
PJ
  1. 已经汇总，还差一条。（今天先发一版）
```

## 2024/03/21


```python
AGV 断线次数、时长 by天 郭
```


```python
广州 AGV维修分析
```


```python

```


```python
KPI 
```


```python
AGV 抽屉、亮灯
```


```python
高层货架数量检品自动化
搬运rebot大小件混在提货DPC
复数REC捆包
```


```python
AGV临时货架的称重机能的开发
```


```python
商品化的过程-EC的沟通
```


```python
WCS运维管理
```


```python
KPI的业务咋办。。？
```


```python
1. 周会：每周一、二 
    1.项目进度-PJ管理表

2. TMM 一个月一次
    1.KPI
```


```python
设备故障率 AGV
分播墙 
系统上分析看看
问问广州刘海东
```

## 2024/03/26


```python
redis 远程访问已调通
C:\TTX-Installers\installers\Redis-x64-5.0.9\redis.windows

改成如下:
bind 0.0.0.0
protected-mode no

怎么启动服务，有点不清楚。依靠重启解决
```

#### redisinstall.txt文件存档

选中系统变量Path点击"编辑"，弹出的窗口点击"新建"，输入Redis安装目录的绝对路径（可点击"浏览"，选择Redis安装目录）。

配置好之后，弹出的窗口全部点击"确定"关闭即可

安装Redis服务
在安装目录下打开命令提示符（可在安装目录的地址栏输入cmd直接回车），执行以下命令。

注：即使配置了系统环境变量，此命令仍需在Redis安装目录下执行，否则找不到redis.windows.conf文件会报错；

redis-server.exe --service-install redis.windows.conf --loglevel verbose

打开安装目录下的redis.windows.conf文件，搜索"requirepass foobared"，在下一行输入"requirepass [password]"，保存后重启服务即可。（如上一步骤安装服务命令的配置文件参数为redis.windows-service.conf，则修改redis.windows-service.conf文件。）



```python
/PJ/202403设备通信/redis通信.ipynb
已经连接成功，但具体解析里面的内容还需要很长时间
```


```python

```


```python
# 0329
```


```python
PJ comment
```
